
file_source = 'C:\\Users\\user\\Downloads\\'
file_flight = 'C:\\Users\\user\\Downloads\\Vuelos'
file_accomm = 'C:\\Users\\user\\Downloads\\Alojamientos'


Cap #Extra 3 | Curso Python con Selenium | Selenium en segundo plano
https://www.youtube.com/watch?v=a-O2K2VUFQg&list=PLas30d-GGNa2UW9-1H-NCNrUocvWD9cyh&index=24


Scraping the Destination Insights tool with Selenium
https://www.danielherediamejias.com/scraping-the-travel-insights-tool-with-selenium/


Nota: La nueva versión de Selenium (4.3.0) elimino find_element_by_ y find_elements_by_ por lo cual ya no se puede usar. 
Probar con:
    driver.find_element(By.XPATH, " ")
    driver.find_elements(By.XPATH, " ")
    driver.find_element(By.CLASS_NAME, " ")
    driver.find_elements(By.CLASS_NAME, " ")
https://github.com/SeleniumHQ/selenium/blob/a4995e2c096239b42c373f26498a6c9bb4f2b3e7/py/CHANGES

|    Old API                        |  New API                         |
|    :----------------------------- |  :------------------------------ |
|    find_element_by_id(‘id’)       |  find_element(By.ID, ‘id’)       |
|    find_element_by_name(‘name’)   |  find_element(By.NAME, ‘name’)   |
|    find_element_by_xpath(‘xpath’) |  find_element(By.XPATH, ‘xpath’) |

https://pythoninoffice.com/fixing-attributeerror-webdriver-object-has-no-attribute-find_element_by_xpath/


Python selenium error: Select only works on <select> elements, not on <md-select-value>


23 Selenium Webdriver Commands Essential for Test Automation:
https://www.techbeamers.com/important-selenium-webdriver-commands/


Waits:
https://selenium-python.readthedocs.io/waits.html


sleep = driver.implicitly_wait(random.uniform(5.0, 10.0))


#Argentina
while True:
    driver.implicitly_wait(10)
    try:
        argentina = WebDriverWait(driver, 10).until(lambda s: s.find_element(By.ID,argentinaId))
        WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.ID,argentinaId)))
        driver.implicitly_wait(10)
        argentina.click()
        break # it will break from the loop once the specific element will be present. 
    except:
        print("Failed to click Argentina")



Fecha y Hora en Python
https://pythondiario.com/2014/05/obtener-fecha-y-hora-actual-en-python.html
    import time

    start = time.strftime("%H:%M:%S")
    print(start)

    print('Test')

    end = time.strftime("%H:%M:%S")
    print(end)



La forma más pitónica de comparar dos listas en Python
https://blog.finxter.com/la-forma-mas-pitonica-de-comparar-dos-listas-en-python/




#Submit
def submit():
    time.sleep(3)
    submit = WebDriverWait(driver, 10).until(lambda s: s.find_element(By.XPATH,submit_path))
    for i in range(2):
        time.sleep(0.3)
        try:
            submit.click()            
            submit = WebDriverWait(driver, 10).until(lambda s: s.find_element(By.XPATH,submit_path)) 
        except:
            break
    time.sleep(10)



def page_validation():
    i = 1
    while True:
        try:
            driver.implicitly_wait(3)
            page_ready = WebDriverWait(driver, 20).until(EC.text_to_be_present_in_element((By.ID,'select_30'),'Spain'))
            graphics_ready = WebDriverWait(driver, 10).until(EC.element_to_be_clickable((By.CSS_SELECTOR,demand_from_css_selector)))
            if ((page_ready == True) and (graphics_ready != any)):
                print("Page is ready!")
            break
        except TimeoutException:
            i += 1
            if (i <= 7):
                print("Loading took too much time!-try again")
                driver.refresh()
            else:
                driver.close()
                print('Try again later')
                quit()


Ejecución de tiempo script:

from datetime import datetime
instanteInicial = datetime.now()
instanteFinal = datetime.now()
tiempo = instanteFinal - instanteInicial # Devuelve un objeto 
segundos = tiempo.seconds



Cómo ejecutar scripts Python automáticamente todos los días en Windows:
https://pythondiario.com/2021/02/como-ejecutar-scripts-python-automaticamente-todos-los-dias-en-windows.html


Cómo automatizar un script de Python en Windows:
https://anderfernandez.com/blog/automatizar-script-python-windows-mac/




def download_status_2():
    flight_csv_1 = [i for i in get_files if i.startswith('FLIGHT__30_ (1)',32,47)]
    accom_csv_1 = [i for i in get_files if i.startswith('ACCOMMODATION__30_ (1)',32,54)]
    download_flight_1 = [extract_cod_country_1(i) for i in flight_csv_1]
    download_accomm_1 = [extract_cod_country_1(i) for i in accom_csv_1]
    download_file_1 = [i for i in download_flight_1 if i in download_accomm_1]
    download_missing_1 = [i for i in primary_country_cod if i not in download_file_1]
    if (collections.Counter(download_file_1) == collections.Counter(primary_country_cod)):
        print('Download process 2 Ok')
        rename_file_download_2()      
        files_path()
        x = 1
    else:
        print('Failed process download 2')
        print('Downloaded countries: ' + str(download_file_1))
        print('Pending countries: ' + str(download_missing_1))
        x = 0
    return x



def extract_cod_country_1(list):
        if len(list) == 51:
            return list[28:-21]
        else:
            return list[28:-28]